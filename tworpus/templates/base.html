<!DOCTYPE html>
<html ng-app="tworpusApp">

<head>
    {% load staticfiles %}
    <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="{% static 'components/select2-3.4.5/select2.css' %}" />
    <link rel="stylesheet" href="{% static 'components/select2-bootstrap.css' %}" />
    <link rel="stylesheet" href="{% static 'components/datepicker/css/pikaday.css' %}" />
    <link rel="stylesheet" href="{% static 'components/joyride-master/css/joyride-2.1.css' %}" />
    <link rel="stylesheet" href="{% static 'components/pnotify-1.2.0/jquery.pnotify.default.css' %}" />
    <link rel="stylesheet" href="{% static 'components/pnotify-1.2.0/use for pines style icons/jquery.pnotify.default.icons.css' %}" />
    <link rel="stylesheet" href="{% static 'dist/css/bootstrap.css' %}" />
    <link rel="stylesheet" href="{% static 'bower_components/angular-ui/build/angular-ui.css' %}" />

    <title>Tworpus</title>


</head>

<body >
<div id="sid" class="hidden" data-sessionid="{{ sid }}">{{ sid }}</div>
{% block body %}

    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">{% block project_title %}Tworpus{% endblock project_title %}</a>
            </div>

            <!-- Navbar top -->
            <div class="navbar-collapse collapse">
                {% block navbar_top %}
                    {% include "includes/navbar_top.html" %}
                {% endblock navbar_top %}
            </div>

        </div>
    </div>

    <div class="container-fluid">
        <div class="row">

            <!-- Nav sidebar -->
            <div class="col-sm-3 col-md-2 sidebar" >
                {% block nav_sidebar %}
                    {% include "includes/sidebar_nav.html" %}
                {% endblock nav_sidebar %}
            </div>
            <!-- Nav sidebar end -->

            <!-- Main content -->
            <div class="col-sm-9 col-sm-offset-3 col-md-14 col-md-offset-2 main" id="main">

                {% block content %}{% endblock content %}
                <div ng-view></div>
                {#                {% include "includes/progressbar.html" %}#}
            </div>
            <!-- Main content end -->

        </div>
    </div>

    {% include "includes/modal.html" %}

    <div ng-controller="ProgressController">
        <div id="corpus-creation-progress" tw-corpus-progress tw-progresses=""
             ng-class="showProgressbar ? 'expanded' : ''" class="well">
        </div>
    </div>

    <ol id="joyRideTipContent">
        <li data-id="input_title">
            <h2>Step #1</h2>
            <p>Enter a project title for creating your corpus</p>
        </li>
        <li data-id="select-language-id">
            <h2>Step #2</h2>
            <p>Choose a language to filter your results</p>
        </li>
        <li data-id="timepickerID">
            <h2>Step #3</h2>
            <p>Select a start and end date to determine the timespan</p>
        </li>
        <li data-id="sliderTestID" data-options="tipLocation:right">
            <h2>Step #4</h2>
            <p>Adjust the sliders for your preferred settings</p>
        </li>
        <li data-id="doitBtnID" data-options="tipLocation:top;tipAnimation:fade">
            <h2>Step #5</h2>
            <p>Create the corpus</p>
        </li>
        <li data-button="View corpora" data-href="#/corpora" data-options="tipLocation:top;tipAnimation:fade">
            <h2>VOILA</h2>
            <p>Ok. You just created a corpus. For more information about it select "View corpora"</p>
        </li>
        <li data-options="tipLocation:top;tipAnimation:fade">
            <h2>Step #6</h2>
            <p>View the corpus</p>
            <p>Hover over it to see stats</p>
            <div class="corpus-view-example-chart"></div>
            <div class="corpus-view-example-stats"></div>
            <div style="clear: both;"></div>
        </li>
            <li data-button="Close" data-options="tipLocation:top;tipAnimation:fade">
            <h2>Have fun !</h2>
            <p>Now you know how to use Tworpus</p>
        </li>
    </ol>
{% endblock body %}

{% block javascripts %}
    <script src="{% static 'bower_components/jquery/dist/jquery.min.js' %}"></script>
    <script src="{% static 'bower_components/underscore/underscore.js' %}"></script>
    {#    <script src="http://localhost:3000/socket.io/socket.io.js"></script>#}
    <script src="{% static 'bower_components/bootstrap/dist/js/bootstrap.min.js' %}"></script>


    <script src="{% static 'components/datepicker/js/moment-min.js' %}"></script>
    <script src="{% static 'components/datepicker/js/pikaday.js' %}"></script>
    <script src="{% static 'components/select2-3.4.5/select2.min.js' %}"></script>
    <script src="{% static 'components/select2-3.4.5/select2_locale_de.js' %}"></script>
    <script src="{% static 'components/pnotify-1.2.0/jquery.pnotify.min.js' %}"></script>
    <script src="{% static 'components/slider/js/bootstrap-slider.js' %}"></script>
    <script src="{% static 'components/d3/d3.min.js' %}"></script>

    <!-- Angular -->
    {#        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.12/angular.min.js"></script>#}

    <script src="{% static 'bower_components/angular/angular.js' %}"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.12/angular-route.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.13/angular-animate.js"></script>
    <script src="{% static 'bower_components/angular-cookies/angular-cookies.js' %}"></script>
    <script src="{% static 'bower_components/angular-ui/build/angular-ui.js' %}"></script>
    <script src="{% static 'bower_components/angular-ui/build/angular-ui-ieshiv.js' %}"></script>
    <script src="{% static 'bower_components/angular-bootstrap/ui-bootstrap.js' %}"></script>
    <script src="http://code.angularjs.org/1.0.8/i18n/angular-locale_de-de.js"></script>
    <script src="{% static 'bower_components/angular-bootstrap/ui-bootstrap-tpls.js' %}"></script>
    <script src="{% static 'bower_components/angular-ui-select2/src/select2.js' %}"></script>

    <script src="{% static 'components/joyride-master/js/jquery.joyride-2.1.js' %}"></script>
    <script src="{% static 'components/joyride-master/js/jquery.cookie.js' %}"></script>
    <script src="{% static 'components/joyride-master/js/modernizr.mq.js' %}"></script>

    <script>
        // Init angular app
        var tworpusApp = angular.module('tworpusApp', [
            'ngRoute',
            'ngCookies',
            'ngAnimate',
            'ui',
            'ui.bootstrap',
            'ui.select2',

            // custom modules
            'createCorpus.services',
            'notifications',
            'tworpusApp.progress',
            'tworpusApp.cache',
            'navigation'
        ]);

        tworpusApp.run(function ($rootScope, $http, $cookies) {
            // set django csrf token
            $http.defaults.headers.post['X-CSRFToken'] = $cookies.csrftoken;

            // needed for django to recognize AjaxRequests
            $http.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
        });

        // Inject viariables generated from django
        tworpusApp.constant('socketId', "{{ sid }}");
        tworpusApp.constant('urls', {
            'sessions': "{% url 'session.views.getSessions'  %}",
            'session': "{% url 'session.views.getSession'  %}",
            'activeSessions': "{% url 'session.views.getActiveSessions'  %}",
            'removeCorpus': "{% url 'session.views.removeCorpus'  %}",
            'startCreateCorpus': "{% url 'session.views.startCreateCorpus' %}",
            'pauseCorpus': "{% url 'session.views.pauseCorpus' %}",
            'resumeCorpus': "{% url 'session.views.resumeCorpus' %}",
            'recreateCorpus': "{% url 'session.views.recreateCorpus' %}",
            'downloadCorpus': "{% url 'session.views.downloadCorpus' %}",
            'clearCache': "{% url 'session.views_cache.clearCache' %}",
            'cacheStatus': "{% url 'session.views_cache.cacheStatus' %}"
        });
    </script>

    <script src="{% static 'js/create_corpus/services.js' %}"></script>
    <script src="{% static 'js/progress/services.js' %}"></script>
    <script src="{% static 'js/notifications.js' %}"></script>
    <script src="{% static 'js/TworpusApp.js' %}"></script>
    <script src="{% static 'js/Corpora.js' %}"></script>
    <script src="{% static 'js/cache/cache.js' %}"></script>
    <script src="{% static 'js/progress/Progressbar.js' %}"></script>
    <script src="{% static 'js/navigation/navigation.js' %}"></script>
    <script src="{% static 'js/SiteTour.js' %}"></script>
{#    <script src="{% static 'dist/js/tworpus.js' %}"></script>#}

{% endblock javascripts %}
</body>
</html>